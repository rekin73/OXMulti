<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Kółko i krzyk</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        #canvas {
            border: 1px solid black;
        }
    </style>
    <script>
        var width = 10;
        var height = 5;
        var plane = [];
        class square {
            constructor(Y, X) {
                this.x = X;
                this.y = Y
            }
        }
        document.addEventListener("DOMContentLoaded", function (event) {
            function isIntersect(point, circle) {
                return Math.sqrt((point.x - circle.x) ** 2 + (point.y - circle.y) ** 2) < circle.radius;
            }

            canvas.addEventListener('click', (e) => {
                const pos = {
                    x: e.clientX,
                    y: e.clientY
                };
                console.log(pos);
                plane.forEach(sqr => {
                    if (isIntersect(pos, sqr)) {
                        alert('click on circle: ' + sqr.id);
                    }
                });
            });
            canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            canvas.width = 0.99 * window.innerWidth;
            canvas.height = 0.99 * window.innerHeight;
            //resize
            window.addEventListener("resize", function () {
                console.log("resize" + window.innerWidth + "," + window.innerHeight);
                var canvas = document.getElementById("canvas");
                canvas.width = window.innerWidth - 2;
                canvas.height = 0.99 * window.innerHeight - 2;
                drawSquare(width, height);
            });
            function drawSquare(wdh, hgh) {
                var sqrWidth = canvas.width / wdh;
                var sqrHeight = canvas.height / hgh;
                var sqrRealWidth = function (W, H) {
                    if (W > H) { return H } else { return W };
                }
                var sqr = sqrRealWidth(sqrWidth, sqrHeight)
                console.log(sqrRealWidth(sqrWidth, sqrHeight))

                for (var i = 0; i < wdh; i++){
                    plane[i]=[];
                    for (var j = 0; j < hgh; j++) {
                        ctx.strokeRect(i * sqr, j * sqr, sqrRealWidth(sqrWidth, sqrHeight), sqrRealWidth(sqrWidth, sqrHeight));
                        plane[i][j] = new square(i * sqr, j * sqr);
                        //plane[i][j]=0;
                        
                    }
                }

            }

            drawSquare(width, height);
            console.log(plane);
        });
    </script>
</head>

<body>
    <canvas id="canvas"></canvas>
</body>

</html>